<div align="center">
    <img src="https://cdn.jsdelivr.net/gh/ryoppippi/ccusage@main/docs/public/logo.svg" alt="ccusage logo" width="256" height="256">
    <h1>ccusage</h1>
</div>

<p align="center">
    <a href="https://npmjs.com/package/ccusage"><img src="https://img.shields.io/npm/v/ccusage?color=yellow" alt="npm version" /></a>
    <a href="https://tanstack.com/stats/npm?packageGroups=%5B%7B%22packages%22:%5B%7B%22name%22:%22ccusage%22%7D%5D%7D%5D&range=30-days&transform=none&binType=daily&showDataMode=all&height=400"><img src="https://img.shields.io/npm/dy/ccusage" alt="NPM Downloads" /></a>
    <a href="https://packagephobia.com/result?p=ccusage"><img src="https://packagephobia.com/badge?p=ccusage" alt="install size" /></a>
    <a href="https://deepwiki.com/ryoppippi/ccusage"><img src="https://img.shields.io/badge/DeepWiki-ryoppippi%2Fccusage-blue.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAA05JREFUaEPtmUtyEzEQhtWTQyQLHNak2AB7ZnyXZMEjXMGeK/AIi+QuHrMnbChYY7MIh8g01fJoopFb0uhhEqqcbWTp06/uv1saEDv4O3n3dV60RfP947Mm9/SQc0ICFQgzfc4CYZoTPAswgSJCCUJUnAAoRHOAUOcATwbmVLWdGoH//PB8mnKqScAhsD0kYP3j/Yt5LPQe2KvcXmGvRHcDnpxfL2zOYJ1mFwrryWTz0advv1Ut4CJgf5uhDuDj5eUcAUoahrdY/56ebRWeraTjMt/00Sh3UDtjgHtQNHwcRGOC98BJEAEymycmYcWwOprTgcB6VZ5JK5TAJ+fXGLBm3FDAmn6oPPjR4rKCAoJCal2eAiQp2x0vxTPB3ALO2CRkwmDy5WohzBDwSEFKRwPbknEggCPB/imwrycgxX2NzoMCHhPkDwqYMr9tRcP5qNrMZHkVnOjRMWwLCcr8ohBVb1OMjxLwGCvjTikrsBOiA6fNyCrm8V1rP93iVPpwaE+gO0SsWmPiXB+jikdf6SizrT5qKasx5j8ABbHpFTx+vFXp9EnYQmLx02h1QTTrl6eDqxLnGjporxl3NL3agEvXdT0WmEost648sQOYAeJS9Q7bfUVoMGnjo4AZdUMQku50McDcMWcBPvr0SzbTAFDfvJqwLzgxwATnCgnp4wDl6Aa+Ax283gghmj+vj7feE2KBBRMW3FzOpLOADl0Isb5587h/U4gGvkt5v60Z1VLG8BhYjbzRwyQZemwAd6cCR5/XFWLYZRIMpX39AR0tjaGGiGzLVyhse5C9RKC6ai42ppWPKiBagOvaYk8lO7DajerabOZP46Lby5wKjw1HCRx7p9sVMOWGzb/vA1hwiWc6jm3MvQDTogQkiqIhJV0nBQBTU+3okKCFDy9WwferkHjtxib7t3xIUQtHxnIwtx4mpg26/HfwVNVDb4oI9RHmx5WGelRVlrtiw43zboCLaxv46AZeB3IlTkwouebTr1y2NjSpHz68WNFjHvupy3q8TFn3Hos2IAk4Ju5dCo8B3wP7VPr/FGaKiG+T+v+TQqIrOqMTL1VdWV1DdmcbO8KXBz6esmYWYKPwDL5b5FA1a0hwapHiom0r/cKaoqr+27/XcrS5UwSMbQAAAABJRU5ErkJggg==" alt="DeepWiki"></a>
    <!-- DeepWiki badge generated by https://deepwiki.ryoppippi.com/ -->
    <a href="https://github.com/hesreallyhim/awesome-claude-code"><img src="https://awesome.re/mentioned-badge.svg" alt="Mentioned in Awesome Claude Code" /></a>
</p>

<div align="center">
    <img src="https://cdn.jsdelivr.net/gh/ryoppippi/ccusage@main/docs/public/screenshot.png">
</div>

> Analyze your Claude Code token usage and costs from local JSONL files — incredibly fast and informative!

## 🚀 New Features Since Fork

This fork adds powerful new capabilities to ccusage:

### 🌐 Multi-Host Server Integration

- **Centralized Usage Tracking**: Aggregate token usage across multiple machines via our hosted server at `soothaa.pythonanywhere.com`
- **Server Commands**: Use `--server` flag with daily/monthly/blocks commands to view aggregated data from all your machines
- **Automatic Synchronization**: Live monitoring automatically syncs data to server every 30 seconds
- **Session Expiration**: Server automatically archives completed sessions (5-hour blocks) for historical tracking
- **Privacy First**: Your data is identified only by a random GUID stored in `~/.ccusage-guid`

### 📤 Historical Data Backfill

- **New `backfill` Command**: Upload all your historical usage data to the server
- **Multi-Machine Aggregation**: Combine usage data from different computers
- **Progress Tracking**: Visual progress bar during upload
- **Dry Run Mode**: Test what would be uploaded with `--dry-run`

### 📊 Enhanced Token Tracking

- **Complete Token Counts**: All displays now include cache creation and cache read tokens
- **Accurate Monitoring**: Live monitoring shows true token usage including massive cache tokens
- **Project-Level Breakdown**: See token usage broken down by project in live monitoring
- **Token Type Details**: Detailed breakdown showing Input/Output/Cache Create/Cache Read for each project

### 🔧 Improved Monitoring

- **Real-Time Updates**: Live dashboard updates every second with current usage
- **Burn Rate Projections**: See token consumption rate and cost projections
- **Multi-Project Support**: Track multiple Claude projects simultaneously
- **Responsive Display**: Automatically adjusts to terminal width

### 🎨 Web Dashboard

- **Beautiful Web UI**: Access your usage dashboard at `https://soothaa.pythonanywhere.com/{YOUR_GUID}`
- **Real-Time Statistics**: View total tokens, costs, active hosts, and projects
- **7-Day Chart**: Visual representation of your token usage over the past week
- **Token Breakdown**: See Input/Output/Cache Create/Cache Read tokens for each project
- **Auto-Refresh**: Dashboard updates every 30 seconds with latest data
- **Dark Theme**: Easy on the eyes with gradient styling
- **Mobile Responsive**: Works perfectly on all device sizes

## Installation

### Quick Start (Recommended)

Run directly without installation:

```bash
npx ccusage@latest
```

### Local Installation

```bash
npm install -g ccusage
```

### Download Binary

Download pre-built binaries from [Releases](https://github.com/sooth/ccusage/releases/latest):

- Linux x64
- macOS x64
- macOS ARM64

## Usage

### Basic Commands

```bash
# Basic usage
ccusage          # Show daily report (default)
ccusage daily    # Daily token usage and costs
ccusage monthly  # Monthly aggregated report
ccusage session  # Usage by conversation session
ccusage blocks   # 5-hour billing windows

# Live monitoring
ccusage blocks --live         # Real-time usage dashboard
ccusage blocks-monitor        # Continuous monitoring with server sync
```

### Server Integration & Web Dashboard

Our hosted server at `soothaa.pythonanywhere.com` provides centralized tracking across all your machines.

#### Accessing Your Web Dashboard

1. Find your GUID:

   ```bash
   cat ~/.ccusage-guid
   ```

2. Visit your personal dashboard:
   ```
   https://soothaa.pythonanywhere.com/{YOUR_GUID}
   ```

#### Server Commands

```bash
# View aggregated data from all your machines
ccusage daily --server      # Combined daily usage
ccusage monthly --server    # Combined monthly usage
ccusage blocks --server     # Combined billing blocks

# Upload your historical data to the server
ccusage backfill --server
ccusage backfill --server --dry-run  # Preview what would be uploaded
ccusage backfill --server --verbose  # See detailed progress

# Live monitoring with automatic server sync
ccusage blocks-monitor      # Syncs every 30 seconds
```

#### Privacy & Data

- Your data is identified only by a random GUID (no personal information)
- The GUID is stored locally in `~/.ccusage-guid`
- Server URL defaults to `https://soothaa.pythonanywhere.com`
- Override with: `export CCUSAGE_SERVER_URL=https://your-server.com`

### Filters and Options

```bash
# Date filtering
ccusage daily --since 20250525 --until 20250530

# Output formats
ccusage daily --json              # JSON output
ccusage daily --breakdown         # Per-model cost breakdown

# Cost calculation modes
ccusage daily --mode calculate    # Always calculate from tokens
ccusage daily --mode display      # Use pre-calculated costs
ccusage daily --mode auto         # Smart mode (default)
```

## Features

- 📊 **Daily Report**: View token usage and costs aggregated by date
- 📅 **Monthly Report**: View token usage and costs aggregated by month
- 💬 **Session Report**: View usage grouped by conversation sessions
- ⏰ **5-Hour Blocks Report**: Track usage within Claude's billing windows with active block monitoring
- 📈 **Live Monitoring**: Real-time dashboard showing active session progress, token burn rate, and cost projections
- 🌐 **Multi-Host Support**: Aggregate usage data across multiple machines via our hosted server
- 🎨 **Web Dashboard**: Beautiful web UI at `soothaa.pythonanywhere.com/{GUID}` with real-time updates
- 📤 **Historical Backfill**: Upload existing local data to server for cross-machine aggregation
- 🤖 **Model Tracking**: See which Claude models you're using (Opus, Sonnet, etc.)
- 📊 **Model Breakdown**: View per-model cost breakdown with `--breakdown` flag
- 📁 **Multi-Directory Support**: Automatically finds Claude data in both `~/.claude` and `~/.config/claude`
- 🎨 **Beautiful Output**: Colorful table-formatted display with automatic responsive layout
- 📋 **Project-Level Tracking**: See token usage broken down by individual projects
- 💰 **Cost Tracking**: Shows costs in USD for each day/month/session
- 🔄 **Cache Token Support**: Tracks and displays all token types including cache tokens
- 🌐 **Automatic Server Sync**: Live monitoring syncs to server every 30 seconds
- 🔌 **MCP Integration**: Built-in Model Context Protocol server for integration with other tools

## Documentation

Full documentation is available at **[ccusage.com](https://ccusage.com/)**

## License

[MIT](LICENSE) © [@ryoppippi](https://github.com/ryoppippi)
